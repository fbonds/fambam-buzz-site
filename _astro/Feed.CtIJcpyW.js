import{j as W,b as xe,g as lt}from"./client-auth.DpfHvIqg.js";import{r as de}from"./index.D55ewHcJ.js";const Ge=!1,Ke="fletcher-dev-id";function ct(S,M){return M.forEach((function(O){O&&typeof O!="string"&&!Array.isArray(O)&&Object.keys(O).forEach((function(d){if(d!=="default"&&!(d in S)){var e=Object.getOwnPropertyDescriptor(O,d);Object.defineProperty(S,d,e.get?e:{enumerable:!0,get:function(){return O[d]}})}}))})),Object.freeze(S)}function Ve(S,M){return new Promise((function(O,d){let e;return ut(S).then((function(t){try{return e=t,O(new Blob([M.slice(0,2),e,M.slice(2)],{type:"image/jpeg"}))}catch(f){return d(f)}}),d)}))}const ut=S=>new Promise(((M,O)=>{const d=new FileReader;d.addEventListener("load",(({target:{result:e}})=>{const t=new DataView(e);let f=0;if(t.getUint16(f)!==65496)return O("not a valid JPEG");for(f+=2;;){const a=t.getUint16(f);if(a===65498)break;const p=t.getUint16(f+2);if(a===65505&&t.getUint32(f+4)===1165519206){const v=f+10;let n;switch(t.getUint16(v)){case 18761:n=!0;break;case 19789:n=!1;break;default:return O("TIFF header contains invalid endian")}if(t.getUint16(v+2,n)!==42)return O("TIFF header contains invalid version");const i=t.getUint32(v+4,n),r=v+i+2+12*t.getUint16(v+i,n);for(let s=v+i+2;s<r;s+=12)if(t.getUint16(s,n)==274){if(t.getUint16(s+2,n)!==3)return O("Orientation data type is invalid");if(t.getUint32(s+4,n)!==1)return O("Orientation data count is invalid");t.setUint16(s+8,1,n);break}return M(e.slice(f,f+2+p))}f+=2+p}return M(new Blob)})),d.readAsArrayBuffer(S)}));var Pe={},dt={get exports(){return Pe},set exports(S){Pe=S}};(function(S){var M,O,d={};dt.exports=d,d.parse=function(e,t){for(var f=d.bin.readUshort,a=d.bin.readUint,p=0,v={},n=new Uint8Array(e),i=n.length-4;a(n,i)!=101010256;)i--;p=i,p+=4;var r=f(n,p+=4);f(n,p+=2);var s=a(n,p+=2),h=a(n,p+=4);p+=4,p=h;for(var x=0;x<r;x++){a(n,p),p+=4,p+=4,p+=4,a(n,p+=4),s=a(n,p+=4);var C=a(n,p+=4),w=f(n,p+=4),j=f(n,p+2),I=f(n,p+4);p+=6;var E=a(n,p+=8);p+=4,p+=w+j+I,d._readLocal(n,E,v,s,C,t)}return v},d._readLocal=function(e,t,f,a,p,v){var n=d.bin.readUshort,i=d.bin.readUint;i(e,t),n(e,t+=4),n(e,t+=2);var r=n(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var s=n(e,t+=8),h=n(e,t+=2);t+=2;var x=d.bin.readUTF8(e,t,s);if(t+=s,t+=h,v)f[x]={size:p,csize:a};else{var C=new Uint8Array(e.buffer,t);if(r==0)f[x]=new Uint8Array(C.buffer.slice(t,t+a));else{if(r!=8)throw"unknown compression method: "+r;var w=new Uint8Array(p);d.inflateRaw(C,w),f[x]=w}}},d.inflateRaw=function(e,t){return d.F.inflate(e,t)},d.inflate=function(e,t){return e[0],e[1],d.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},d.deflate=function(e,t){t==null&&(t={level:6});var f=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[f]=120,a[f+1]=156,f+=2,f=d.F.deflateRaw(e,a,f,t.level);var p=d.adler(e,0,e.length);return a[f+0]=p>>>24&255,a[f+1]=p>>>16&255,a[f+2]=p>>>8&255,a[f+3]=p>>>0&255,new Uint8Array(a.buffer,0,f+4)},d.deflateRaw=function(e,t){t==null&&(t={level:6});var f=new Uint8Array(50+Math.floor(1.1*e.length)),a=d.F.deflateRaw(e,f,a,t.level);return new Uint8Array(f.buffer,0,a)},d.encode=function(e,t){t==null&&(t=!1);var f=0,a=d.bin.writeUint,p=d.bin.writeUshort,v={};for(var n in e){var i=!d._noNeed(n)&&!t,r=e[n],s=d.crc.crc(r,0,r.length);v[n]={cpr:i,usize:r.length,crc:s,file:i?d.deflateRaw(r):r}}for(var n in v)f+=v[n].file.length+30+46+2*d.bin.sizeUTF8(n);f+=22;var h=new Uint8Array(f),x=0,C=[];for(var n in v){var w=v[n];C.push(x),x=d._writeHeader(h,x,n,w,0)}var j=0,I=x;for(var n in v)w=v[n],C.push(x),x=d._writeHeader(h,x,n,w,1,C[j++]);var E=x-I;return a(h,x,101010256),x+=4,p(h,x+=4,j),p(h,x+=2,j),a(h,x+=2,E),a(h,x+=4,I),x+=4,x+=2,h.buffer},d._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},d._writeHeader=function(e,t,f,a,p,v){var n=d.bin.writeUint,i=d.bin.writeUshort,r=a.file;return n(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,a.cpr?8:0),n(e,t+=2,0),n(e,t+=4,a.crc),n(e,t+=4,r.length),n(e,t+=4,a.usize),i(e,t+=4,d.bin.sizeUTF8(f)),i(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,n(e,t+=6,v),t+=4),t+=d.bin.writeUTF8(e,t,f),p==0&&(e.set(r,t),t+=r.length),t},d.crc={table:(function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var f=t,a=0;a<8;a++)1&f?f=3988292384^f>>>1:f>>>=1;e[t]=f}return e})(),update:function(e,t,f,a){for(var p=0;p<a;p++)e=d.crc.table[255&(e^t[f+p])]^e>>>8;return e},crc:function(e,t,f){return 4294967295^d.crc.update(4294967295,e,t,f)}},d.adler=function(e,t,f){for(var a=1,p=0,v=t,n=t+f;v<n;){for(var i=Math.min(v+5552,n);v<i;)p+=a+=e[v++];a%=65521,p%=65521}return p<<16|a},d.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,f){e[t]=255&f,e[t+1]=f>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,f){e[t]=255&f,e[t+1]=f>>8&255,e[t+2]=f>>16&255,e[t+3]=f>>24&255},readASCII:function(e,t,f){for(var a="",p=0;p<f;p++)a+=String.fromCharCode(e[t+p]);return a},writeASCII:function(e,t,f){for(var a=0;a<f.length;a++)e[t+a]=f.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,f){for(var a,p="",v=0;v<f;v++)p+="%"+d.bin.pad(e[t+v].toString(16));try{a=decodeURIComponent(p)}catch{return d.bin.readASCII(e,t,f)}return a},writeUTF8:function(e,t,f){for(var a=f.length,p=0,v=0;v<a;v++){var n=f.charCodeAt(v);if((4294967168&n)==0)e[t+p]=n,p++;else if((4294965248&n)==0)e[t+p]=192|n>>6,e[t+p+1]=128|n>>0&63,p+=2;else if((4294901760&n)==0)e[t+p]=224|n>>12,e[t+p+1]=128|n>>6&63,e[t+p+2]=128|n>>0&63,p+=3;else{if((4292870144&n)!=0)throw"e";e[t+p]=240|n>>18,e[t+p+1]=128|n>>12&63,e[t+p+2]=128|n>>6&63,e[t+p+3]=128|n>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,f=0,a=0;a<t;a++){var p=e.charCodeAt(a);if((4294967168&p)==0)f++;else if((4294965248&p)==0)f+=2;else if((4294901760&p)==0)f+=3;else{if((4292870144&p)!=0)throw"e";f+=4}}return f}},d.F={},d.F.deflateRaw=function(e,t,f,a){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],v=d.F.U,n=d.F._goodIndex;d.F._hash;var i=d.F._putsE,r=0,s=f<<3,h=0,x=e.length;if(a==0){for(;r<x;)i(t,s,r+(A=Math.min(65535,x-r))==x?1:0),s=d.F._copyExact(e,r,A,t,s+8),r+=A;return s>>>3}var C=v.lits,w=v.strt,j=v.prev,I=0,E=0,k=0,g=0,T=0,c=0;for(x>2&&(w[c=d.F._hash(e,0)]=0),r=0;r<x;r++){if(T=c,r+1<x-2){c=d.F._hash(e,r+1);var l=r+1&32767;j[l]=w[c],w[c]=l}if(h<=r){(I>14e3||E>26697)&&x-r>100&&(h<r&&(C[I]=r-h,I+=2,h=r),s=d.F._writeBlock(r==x-1||h==x?1:0,C,I,g,e,k,r-k,t,s),I=E=g=0,k=r);var b=0;r<x-2&&(b=d.F._bestMatch(e,r,j,T,Math.min(p[2],x-r),p[3]));var A=b>>>16,y=65535&b;if(b!=0){y=65535&b;var U=n(A=b>>>16,v.of0);v.lhst[257+U]++;var m=n(y,v.df0);v.dhst[m]++,g+=v.exb[U]+v.dxb[m],C[I]=A<<23|r-h,C[I+1]=y<<16|U<<8|m,I+=2,h=r+A}else v.lhst[e[r]]++;E++}}for(k==r&&e.length!=0||(h<r&&(C[I]=r-h,I+=2,h=r),s=d.F._writeBlock(1,C,I,g,e,k,r-k,t,s),I=0,E=0,I=E=g=0,k=r);(7&s)!=0;)s++;return s>>>3},d.F._bestMatch=function(e,t,f,a,p,v){var n=32767&t,i=f[n],r=n-i+32768&32767;if(i==n||a!=d.F._hash(e,t-r))return 0;for(var s=0,h=0,x=Math.min(32767,t);r<=x&&--v!=0&&i!=n;){if(s==0||e[t+s]==e[t+s-r]){var C=d.F._howLong(e,t,r);if(C>s){if(h=r,(s=C)>=p)break;r+2<C&&(C=r+2);for(var w=0,j=0;j<C-2;j++){var I=t-r+j+32768&32767,E=I-f[I]+32768&32767;E>w&&(w=E,i=I)}}}r+=(n=i)-(i=f[n])+32768&32767}return s<<16|h},d.F._howLong=function(e,t,f){if(e[t]!=e[t-f]||e[t+1]!=e[t+1-f]||e[t+2]!=e[t+2-f])return 0;var a=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-f];)t++;return t-a},d.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},d.saved=0,d.F._writeBlock=function(e,t,f,a,p,v,n,i,r){var s,h,x,C,w,j,I,E,k,g=d.F.U,T=d.F._putsF,c=d.F._putsE;g.lhst[256]++,h=(s=d.F.getTrees())[0],x=s[1],C=s[2],w=s[3],j=s[4],I=s[5],E=s[6],k=s[7];var l=32+((r+3&7)==0?0:8-(r+3&7))+(n<<3),b=a+d.F.contSize(g.fltree,g.lhst)+d.F.contSize(g.fdtree,g.dhst),A=a+d.F.contSize(g.ltree,g.lhst)+d.F.contSize(g.dtree,g.dhst);A+=14+3*I+d.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var y=0;y<286;y++)g.lhst[y]=0;for(y=0;y<30;y++)g.dhst[y]=0;for(y=0;y<19;y++)g.ihst[y]=0;var U=l<b&&l<A?0:b<A?1:2;if(T(i,r,e),T(i,r+1,U),r+=3,U==0){for(;(7&r)!=0;)r++;r=d.F._copyExact(p,v,n,i,r)}else{var m,F;if(U==1&&(m=g.fltree,F=g.fdtree),U==2){d.F.makeCodes(g.ltree,h),d.F.revCodes(g.ltree,h),d.F.makeCodes(g.dtree,x),d.F.revCodes(g.dtree,x),d.F.makeCodes(g.itree,C),d.F.revCodes(g.itree,C),m=g.ltree,F=g.dtree,c(i,r,w-257),c(i,r+=5,j-1),c(i,r+=5,I-4),r+=4;for(var u=0;u<I;u++)c(i,r+3*u,g.itree[1+(g.ordr[u]<<1)]);r+=3*I,r=d.F._codeTiny(E,g.itree,i,r),r=d.F._codeTiny(k,g.itree,i,r)}for(var o=v,P=0;P<f;P+=2){for(var _=t[P],D=_>>>23,N=o+(8388607&_);o<N;)r=d.F._writeLit(p[o++],m,i,r);if(D!=0){var L=t[P+1],z=L>>16,H=L>>8&255,R=255&L;c(i,r=d.F._writeLit(257+H,m,i,r),D-g.of0[H]),r+=g.exb[H],T(i,r=d.F._writeLit(R,F,i,r),z-g.df0[R]),r+=g.dxb[R],o+=D}}r=d.F._writeLit(256,m,i,r)}return r},d.F._copyExact=function(e,t,f,a,p){var v=p>>>3;return a[v]=f,a[v+1]=f>>>8,a[v+2]=255-a[v],a[v+3]=255-a[v+1],v+=4,a.set(new Uint8Array(e.buffer,t,f),v),p+(f+4<<3)},d.F.getTrees=function(){for(var e=d.F.U,t=d.F._hufTree(e.lhst,e.ltree,15),f=d.F._hufTree(e.dhst,e.dtree,15),a=[],p=d.F._lenCodes(e.ltree,a),v=[],n=d.F._lenCodes(e.dtree,v),i=0;i<a.length;i+=2)e.ihst[a[i]]++;for(i=0;i<v.length;i+=2)e.ihst[v[i]]++;for(var r=d.F._hufTree(e.ihst,e.itree,7),s=19;s>4&&e.itree[1+(e.ordr[s-1]<<1)]==0;)s--;return[t,f,r,p,n,s,a,v]},d.F.getSecond=function(e){for(var t=[],f=0;f<e.length;f+=2)t.push(e[f+1]);return t},d.F.nonZero=function(e){for(var t="",f=0;f<e.length;f+=2)e[f+1]!=0&&(t+=(f>>1)+",");return t},d.F.contSize=function(e,t){for(var f=0,a=0;a<t.length;a++)f+=t[a]*e[1+(a<<1)];return f},d.F._codeTiny=function(e,t,f,a){for(var p=0;p<e.length;p+=2){var v=e[p],n=e[p+1];a=d.F._writeLit(v,t,f,a);var i=v==16?2:v==17?3:7;v>15&&(d.F._putsE(f,a,n,i),a+=i)}return a},d.F._lenCodes=function(e,t){for(var f=e.length;f!=2&&e[f-1]==0;)f-=2;for(var a=0;a<f;a+=2){var p=e[a+1],v=a+3<f?e[a+3]:-1,n=a+5<f?e[a+5]:-1,i=a==0?-1:e[a-1];if(p==0&&v==p&&n==p){for(var r=a+5;r+2<f&&e[r+2]==p;)r+=2;(s=Math.min(r+1-a>>>1,138))<11?t.push(17,s-3):t.push(18,s-11),a+=2*s-2}else if(p==i&&v==p&&n==p){for(r=a+5;r+2<f&&e[r+2]==p;)r+=2;var s=Math.min(r+1-a>>>1,6);t.push(16,s-3),a+=2*s-2}else t.push(p,0)}return f>>>1},d.F._hufTree=function(e,t,f){var a=[],p=e.length,v=t.length,n=0;for(n=0;n<v;n+=2)t[n]=0,t[n+1]=0;for(n=0;n<p;n++)e[n]!=0&&a.push({lit:n,f:e[n]});var i=a.length,r=a.slice(0);if(i==0)return 0;if(i==1){var s=a[0].lit;return r=s==0?1:0,t[1+(s<<1)]=1,t[1+(r<<1)]=1,1}a.sort((function(E,k){return E.f-k.f}));var h=a[0],x=a[1],C=0,w=1,j=2;for(a[0]={lit:-1,f:h.f+x.f,l:h,r:x,d:0};w!=i-1;)h=C!=w&&(j==i||a[C].f<a[j].f)?a[C++]:a[j++],x=C!=w&&(j==i||a[C].f<a[j].f)?a[C++]:a[j++],a[w++]={lit:-1,f:h.f+x.f,l:h,r:x};var I=d.F.setDepth(a[w-1],0);for(I>f&&(d.F.restrictDepth(r,f,I),I=f),n=0;n<i;n++)t[1+(r[n].lit<<1)]=r[n].d;return I},d.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(d.F.setDepth(e.l,t+1),d.F.setDepth(e.r,t+1))},d.F.restrictDepth=function(e,t,f){var a=0,p=1<<f-t,v=0;for(e.sort((function(i,r){return r.d==i.d?i.f-r.f:r.d-i.d})),a=0;a<e.length&&e[a].d>t;a++){var n=e[a].d;e[a].d=t,v+=p-(1<<f-n)}for(v>>>=f-t;v>0;)(n=e[a].d)<t?(e[a].d++,v-=1<<t-n-1):a++;for(;a>=0;a--)e[a].d==t&&v<0&&(e[a].d--,v++);v!=0&&console.log("debt left")},d.F._goodIndex=function(e,t){var f=0;return t[16|f]<=e&&(f|=16),t[8|f]<=e&&(f|=8),t[4|f]<=e&&(f|=4),t[2|f]<=e&&(f|=2),t[1|f]<=e&&(f|=1),f},d.F._writeLit=function(e,t,f,a){return d.F._putsF(f,a,t[e<<1]),a+t[1+(e<<1)]},d.F.inflate=function(e,t){var f=Uint8Array;if(e[0]==3&&e[1]==0)return t||new f(0);var a=d.F,p=a._bitsF,v=a._bitsE,n=a._decodeTiny,i=a.makeCodes,r=a.codes2map,s=a._get17,h=a.U,x=t==null;x&&(t=new f(e.length>>>2<<3));for(var C,w,j=0,I=0,E=0,k=0,g=0,T=0,c=0,l=0,b=0;j==0;)if(j=p(e,b,1),I=p(e,b+1,2),b+=3,I!=0){if(x&&(t=d.F._check(t,l+(1<<17))),I==1&&(C=h.flmap,w=h.fdmap,T=511,c=31),I==2){E=v(e,b,5)+257,k=v(e,b+5,5)+1,g=v(e,b+10,4)+4,b+=14;for(var A=0;A<38;A+=2)h.itree[A]=0,h.itree[A+1]=0;var y=1;for(A=0;A<g;A++){var U=v(e,b+3*A,3);h.itree[1+(h.ordr[A]<<1)]=U,U>y&&(y=U)}b+=3*g,i(h.itree,y),r(h.itree,y,h.imap),C=h.lmap,w=h.dmap,b=n(h.imap,(1<<y)-1,E+k,e,b,h.ttree);var m=a._copyOut(h.ttree,0,E,h.ltree);T=(1<<m)-1;var F=a._copyOut(h.ttree,E,k,h.dtree);c=(1<<F)-1,i(h.ltree,m),r(h.ltree,m,C),i(h.dtree,F),r(h.dtree,F,w)}for(;;){var u=C[s(e,b)&T];b+=15&u;var o=u>>>4;if(!(o>>>8))t[l++]=o;else{if(o==256)break;var P=l+o-254;if(o>264){var _=h.ldef[o-257];P=l+(_>>>3)+v(e,b,7&_),b+=7&_}var D=w[s(e,b)&c];b+=15&D;var N=D>>>4,L=h.ddef[N],z=(L>>>4)+p(e,b,15&L);for(b+=15&L,x&&(t=d.F._check(t,l+(1<<17)));l<P;)t[l]=t[l++-z],t[l]=t[l++-z],t[l]=t[l++-z],t[l]=t[l++-z];l=P}}}else{(7&b)!=0&&(b+=8-(7&b));var H=4+(b>>>3),R=e[H-4]|e[H-3]<<8;x&&(t=d.F._check(t,l+R)),t.set(new f(e.buffer,e.byteOffset+H,R),l),b=H+R<<3,l+=R}return t.length==l?t:t.slice(0,l)},d.F._check=function(e,t){var f=e.length;if(t<=f)return e;var a=new Uint8Array(Math.max(f<<1,t));return a.set(e,0),a},d.F._decodeTiny=function(e,t,f,a,p,v){for(var n=d.F._bitsE,i=d.F._get17,r=0;r<f;){var s=e[i(a,p)&t];p+=15&s;var h=s>>>4;if(h<=15)v[r]=h,r++;else{var x=0,C=0;h==16?(C=3+n(a,p,2),p+=2,x=v[r-1]):h==17?(C=3+n(a,p,3),p+=3):h==18&&(C=11+n(a,p,7),p+=7);for(var w=r+C;r<w;)v[r]=x,r++}}return p},d.F._copyOut=function(e,t,f,a){for(var p=0,v=0,n=a.length>>>1;v<f;){var i=e[v+t];a[v<<1]=0,a[1+(v<<1)]=i,i>p&&(p=i),v++}for(;v<n;)a[v<<1]=0,a[1+(v<<1)]=0,v++;return p},d.F.makeCodes=function(e,t){for(var f,a,p,v,n=d.F.U,i=e.length,r=n.bl_count,s=0;s<=t;s++)r[s]=0;for(s=1;s<i;s+=2)r[e[s]]++;var h=n.next_code;for(f=0,r[0]=0,a=1;a<=t;a++)f=f+r[a-1]<<1,h[a]=f;for(p=0;p<i;p+=2)(v=e[p+1])!=0&&(e[p]=h[v],h[v]++)},d.F.codes2map=function(e,t,f){for(var a=e.length,p=d.F.U.rev15,v=0;v<a;v+=2)if(e[v+1]!=0)for(var n=v>>1,i=e[v+1],r=n<<4|i,s=t-i,h=e[v]<<s,x=h+(1<<s);h!=x;)f[p[h]>>>15-t]=r,h++},d.F.revCodes=function(e,t){for(var f=d.F.U.rev15,a=15-t,p=0;p<e.length;p+=2){var v=e[p]<<t-e[p+1];e[p]=f[v]>>>a}},d.F._putsE=function(e,t,f){f<<=7&t;var a=t>>>3;e[a]|=f,e[a+1]|=f>>>8},d.F._putsF=function(e,t,f){f<<=7&t;var a=t>>>3;e[a]|=f,e[a+1]|=f>>>8,e[a+2]|=f>>>16},d.F._bitsE=function(e,t,f){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<f)-1},d.F._bitsF=function(e,t,f){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<f)-1},d.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},d.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},d.F.U=(M=Uint16Array,O=Uint32Array,{next_code:new M(16),bl_count:new M(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new M(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new O(32),flmap:new M(512),fltree:[],fdmap:new M(32),fdtree:[],lmap:new M(32768),ltree:[],ttree:[],dmap:new M(32768),dtree:[],imap:new M(512),itree:[],rev15:new M(32768),lhst:new O(286),dhst:new O(30),ihst:new O(19),lits:new O(15e3),strt:new M(65536),prev:new M(32768)}),(function(){for(var e=d.F.U,t=0;t<32768;t++){var f=t;f=(4278255360&(f=(4042322160&(f=(3435973836&(f=(2863311530&f)>>>1|(1431655765&f)<<1))>>>2|(858993459&f)<<2))>>>4|(252645135&f)<<4))>>>8|(16711935&f)<<8,e.rev15[t]=(f>>>16|f<<16)>>>17}function a(p,v,n){for(;v--!=0;)p.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),d.F.makeCodes(e.fltree,9),d.F.codes2map(e.fltree,9,e.flmap),d.F.revCodes(e.fltree,9),a(e.fdtree,32,5),d.F.makeCodes(e.fdtree,5),d.F.codes2map(e.fdtree,5,e.fdmap),d.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)})()})();var ht=ct({__proto__:null,default:Pe},[Pe]);const ge=(function(){var S={nextZero(n,i){for(;n[i]!=0;)i++;return i},readUshort:(n,i)=>n[i]<<8|n[i+1],writeUshort(n,i,r){n[i]=r>>8&255,n[i+1]=255&r},readUint:(n,i)=>16777216*n[i]+(n[i+1]<<16|n[i+2]<<8|n[i+3]),writeUint(n,i,r){n[i]=r>>24&255,n[i+1]=r>>16&255,n[i+2]=r>>8&255,n[i+3]=255&r},readASCII(n,i,r){let s="";for(let h=0;h<r;h++)s+=String.fromCharCode(n[i+h]);return s},writeASCII(n,i,r){for(let s=0;s<r.length;s++)n[i+s]=r.charCodeAt(s)},readBytes(n,i,r){const s=[];for(let h=0;h<r;h++)s.push(n[i+h]);return s},pad:n=>n.length<2?`0${n}`:n,readUTF8(n,i,r){let s,h="";for(let x=0;x<r;x++)h+=`%${S.pad(n[i+x].toString(16))}`;try{s=decodeURIComponent(h)}catch{return S.readASCII(n,i,r)}return s}};function M(n,i,r,s){const h=i*r,x=t(s),C=Math.ceil(i*x/8),w=new Uint8Array(4*h),j=new Uint32Array(w.buffer),{ctype:I}=s,{depth:E}=s,k=S.readUshort;if(I==6){const _=h<<2;if(E==8)for(var g=0;g<_;g+=4)w[g]=n[g],w[g+1]=n[g+1],w[g+2]=n[g+2],w[g+3]=n[g+3];if(E==16)for(g=0;g<_;g++)w[g]=n[g<<1]}else if(I==2){const _=s.tabs.tRNS;if(_==null){if(E==8)for(g=0;g<h;g++){var T=3*g;j[g]=255<<24|n[T+2]<<16|n[T+1]<<8|n[T]}if(E==16)for(g=0;g<h;g++)T=6*g,j[g]=255<<24|n[T+4]<<16|n[T+2]<<8|n[T]}else{var c=_[0];const D=_[1],N=_[2];if(E==8)for(g=0;g<h;g++){var l=g<<2;T=3*g,j[g]=255<<24|n[T+2]<<16|n[T+1]<<8|n[T],n[T]==c&&n[T+1]==D&&n[T+2]==N&&(w[l+3]=0)}if(E==16)for(g=0;g<h;g++)l=g<<2,T=6*g,j[g]=255<<24|n[T+4]<<16|n[T+2]<<8|n[T],k(n,T)==c&&k(n,T+2)==D&&k(n,T+4)==N&&(w[l+3]=0)}}else if(I==3){const _=s.tabs.PLTE,D=s.tabs.tRNS,N=D?D.length:0;if(E==1)for(var b=0;b<r;b++){var A=b*C,y=b*i;for(g=0;g<i;g++){l=y+g<<2;var U=3*(m=n[A+(g>>3)]>>7-((7&g)<<0)&1);w[l]=_[U],w[l+1]=_[U+1],w[l+2]=_[U+2],w[l+3]=m<N?D[m]:255}}if(E==2)for(b=0;b<r;b++)for(A=b*C,y=b*i,g=0;g<i;g++)l=y+g<<2,U=3*(m=n[A+(g>>2)]>>6-((3&g)<<1)&3),w[l]=_[U],w[l+1]=_[U+1],w[l+2]=_[U+2],w[l+3]=m<N?D[m]:255;if(E==4)for(b=0;b<r;b++)for(A=b*C,y=b*i,g=0;g<i;g++)l=y+g<<2,U=3*(m=n[A+(g>>1)]>>4-((1&g)<<2)&15),w[l]=_[U],w[l+1]=_[U+1],w[l+2]=_[U+2],w[l+3]=m<N?D[m]:255;if(E==8)for(g=0;g<h;g++){var m;l=g<<2,U=3*(m=n[g]),w[l]=_[U],w[l+1]=_[U+1],w[l+2]=_[U+2],w[l+3]=m<N?D[m]:255}}else if(I==4){if(E==8)for(g=0;g<h;g++){l=g<<2;var F=n[u=g<<1];w[l]=F,w[l+1]=F,w[l+2]=F,w[l+3]=n[u+1]}if(E==16)for(g=0;g<h;g++){var u;l=g<<2,F=n[u=g<<2],w[l]=F,w[l+1]=F,w[l+2]=F,w[l+3]=n[u+2]}}else if(I==0)for(c=s.tabs.tRNS?s.tabs.tRNS:-1,b=0;b<r;b++){const _=b*C,D=b*i;if(E==1)for(var o=0;o<i;o++){var P=(F=255*(n[_+(o>>>3)]>>>7-(7&o)&1))==255*c?0:255;j[D+o]=P<<24|F<<16|F<<8|F}else if(E==2)for(o=0;o<i;o++)P=(F=85*(n[_+(o>>>2)]>>>6-((3&o)<<1)&3))==85*c?0:255,j[D+o]=P<<24|F<<16|F<<8|F;else if(E==4)for(o=0;o<i;o++)P=(F=17*(n[_+(o>>>1)]>>>4-((1&o)<<2)&15))==17*c?0:255,j[D+o]=P<<24|F<<16|F<<8|F;else if(E==8)for(o=0;o<i;o++)P=(F=n[_+o])==c?0:255,j[D+o]=P<<24|F<<16|F<<8|F;else if(E==16)for(o=0;o<i;o++)F=n[_+(o<<1)],P=k(n,_+(o<<1))==c?0:255,j[D+o]=P<<24|F<<16|F<<8|F}return w}function O(n,i,r,s){const h=t(n),x=Math.ceil(r*h/8),C=new Uint8Array((x+1+n.interlace)*s);return i=n.tabs.CgBI?e(i,C):d(i,C),n.interlace==0?i=f(i,n,0,r,s):n.interlace==1&&(i=(function(j,I){const E=I.width,k=I.height,g=t(I),T=g>>3,c=Math.ceil(E*g/8),l=new Uint8Array(k*c);let b=0;const A=[0,0,4,0,2,0,1],y=[0,4,0,2,0,1,0],U=[8,8,8,4,4,2,2],m=[8,8,4,4,2,2,1];let F=0;for(;F<7;){const o=U[F],P=m[F];let _=0,D=0,N=A[F];for(;N<k;)N+=o,D++;let L=y[F];for(;L<E;)L+=P,_++;const z=Math.ceil(_*g/8);f(j,I,b,_,D);let H=0,R=A[F];for(;R<k;){let B=y[F],Z=b+H*z<<3;for(;B<E;){var u;if(g==1&&(u=(u=j[Z>>3])>>7-(7&Z)&1,l[R*c+(B>>3)]|=u<<7-((7&B)<<0)),g==2&&(u=(u=j[Z>>3])>>6-(7&Z)&3,l[R*c+(B>>2)]|=u<<6-((3&B)<<1)),g==4&&(u=(u=j[Z>>3])>>4-(7&Z)&15,l[R*c+(B>>1)]|=u<<4-((1&B)<<2)),g>=8){const $=R*c+B*T;for(let Q=0;Q<T;Q++)l[$+Q]=j[(Z>>3)+Q]}Z+=g,B+=P}H++,R+=o}_*D!=0&&(b+=D*(1+z)),F+=1}return l})(i,n)),i}function d(n,i){return e(new Uint8Array(n.buffer,2,n.length-6),i)}var e=(function(){const n={H:{}};return n.H.N=function(i,r){const s=Uint8Array;let h,x,C=0,w=0,j=0,I=0,E=0,k=0,g=0,T=0,c=0;if(i[0]==3&&i[1]==0)return r||new s(0);const l=n.H,b=l.b,A=l.e,y=l.R,U=l.n,m=l.A,F=l.Z,u=l.m,o=r==null;for(o&&(r=new s(i.length>>>2<<5));C==0;)if(C=b(i,c,1),w=b(i,c+1,2),c+=3,w!=0){if(o&&(r=n.H.W(r,T+(1<<17))),w==1&&(h=u.J,x=u.h,k=511,g=31),w==2){j=A(i,c,5)+257,I=A(i,c+5,5)+1,E=A(i,c+10,4)+4,c+=14;let _=1;for(var P=0;P<38;P+=2)u.Q[P]=0,u.Q[P+1]=0;for(P=0;P<E;P++){const L=A(i,c+3*P,3);u.Q[1+(u.X[P]<<1)]=L,L>_&&(_=L)}c+=3*E,U(u.Q,_),m(u.Q,_,u.u),h=u.w,x=u.d,c=y(u.u,(1<<_)-1,j+I,i,c,u.v);const D=l.V(u.v,0,j,u.C);k=(1<<D)-1;const N=l.V(u.v,j,I,u.D);g=(1<<N)-1,U(u.C,D),m(u.C,D,h),U(u.D,N),m(u.D,N,x)}for(;;){const _=h[F(i,c)&k];c+=15&_;const D=_>>>4;if(!(D>>>8))r[T++]=D;else{if(D==256)break;{let N=T+D-254;if(D>264){const B=u.q[D-257];N=T+(B>>>3)+A(i,c,7&B),c+=7&B}const L=x[F(i,c)&g];c+=15&L;const z=L>>>4,H=u.c[z],R=(H>>>4)+b(i,c,15&H);for(c+=15&H;T<N;)r[T]=r[T++-R],r[T]=r[T++-R],r[T]=r[T++-R],r[T]=r[T++-R];T=N}}}}else{(7&c)!=0&&(c+=8-(7&c));const _=4+(c>>>3),D=i[_-4]|i[_-3]<<8;o&&(r=n.H.W(r,T+D)),r.set(new s(i.buffer,i.byteOffset+_,D),T),c=_+D<<3,T+=D}return r.length==T?r:r.slice(0,T)},n.H.W=function(i,r){const s=i.length;if(r<=s)return i;const h=new Uint8Array(s<<1);return h.set(i,0),h},n.H.R=function(i,r,s,h,x,C){const w=n.H.e,j=n.H.Z;let I=0;for(;I<s;){const E=i[j(h,x)&r];x+=15&E;const k=E>>>4;if(k<=15)C[I]=k,I++;else{let g=0,T=0;k==16?(T=3+w(h,x,2),x+=2,g=C[I-1]):k==17?(T=3+w(h,x,3),x+=3):k==18&&(T=11+w(h,x,7),x+=7);const c=I+T;for(;I<c;)C[I]=g,I++}}return x},n.H.V=function(i,r,s,h){let x=0,C=0;const w=h.length>>>1;for(;C<s;){const j=i[C+r];h[C<<1]=0,h[1+(C<<1)]=j,j>x&&(x=j),C++}for(;C<w;)h[C<<1]=0,h[1+(C<<1)]=0,C++;return x},n.H.n=function(i,r){const s=n.H.m,h=i.length;let x,C,w,j;const I=s.j;for(var E=0;E<=r;E++)I[E]=0;for(E=1;E<h;E+=2)I[i[E]]++;const k=s.K;for(x=0,I[0]=0,C=1;C<=r;C++)x=x+I[C-1]<<1,k[C]=x;for(w=0;w<h;w+=2)j=i[w+1],j!=0&&(i[w]=k[j],k[j]++)},n.H.A=function(i,r,s){const h=i.length,x=n.H.m.r;for(let C=0;C<h;C+=2)if(i[C+1]!=0){const w=C>>1,j=i[C+1],I=w<<4|j,E=r-j;let k=i[C]<<E;const g=k+(1<<E);for(;k!=g;)s[x[k]>>>15-r]=I,k++}},n.H.l=function(i,r){const s=n.H.m.r,h=15-r;for(let x=0;x<i.length;x+=2){const C=i[x]<<r-i[x+1];i[x]=s[C]>>>h}},n.H.M=function(i,r,s){s<<=7&r;const h=r>>>3;i[h]|=s,i[h+1]|=s>>>8},n.H.I=function(i,r,s){s<<=7&r;const h=r>>>3;i[h]|=s,i[h+1]|=s>>>8,i[h+2]|=s>>>16},n.H.e=function(i,r,s){return(i[r>>>3]|i[1+(r>>>3)]<<8)>>>(7&r)&(1<<s)-1},n.H.b=function(i,r,s){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)&(1<<s)-1},n.H.Z=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)},n.H.i=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16|i[3+(r>>>3)]<<24)>>>(7&r)},n.H.m=(function(){const i=Uint16Array,r=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new i(65536),g:new i(32768)}})(),(function(){const i=n.H.m;for(var r=0;r<32768;r++){let h=r;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,i.r[r]=(h>>>16|h<<16)>>>17}function s(h,x,C){for(;x--!=0;)h.push(0,C)}for(r=0;r<32;r++)i.q[r]=i.S[r]<<3|i.T[r],i.c[r]=i.p[r]<<4|i.z[r];s(i._,144,8),s(i._,112,9),s(i._,24,7),s(i._,8,8),n.H.n(i._,9),n.H.A(i._,9,i.J),n.H.l(i._,9),s(i.$,32,5),n.H.n(i.$,5),n.H.A(i.$,5,i.h),n.H.l(i.$,5),s(i.Q,19,0),s(i.C,286,0),s(i.D,30,0),s(i.v,320,0)})(),n.H.N})();function t(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function f(n,i,r,s,h){let x=t(i);const C=Math.ceil(s*x/8);let w,j;x=Math.ceil(x/8);let I=n[r],E=0;if(I>1&&(n[r]=[0,0,1][I-2]),I==3)for(E=x;E<C;E++)n[E+1]=n[E+1]+(n[E+1-x]>>>1)&255;for(let k=0;k<h;k++)if(w=r+k*C,j=w+k+1,I=n[j-1],E=0,I==0)for(;E<C;E++)n[w+E]=n[j+E];else if(I==1){for(;E<x;E++)n[w+E]=n[j+E];for(;E<C;E++)n[w+E]=n[j+E]+n[w+E-x]}else if(I==2)for(;E<C;E++)n[w+E]=n[j+E]+n[w+E-C];else if(I==3){for(;E<x;E++)n[w+E]=n[j+E]+(n[w+E-C]>>>1);for(;E<C;E++)n[w+E]=n[j+E]+(n[w+E-C]+n[w+E-x]>>>1)}else{for(;E<x;E++)n[w+E]=n[j+E]+a(0,n[w+E-C],0);for(;E<C;E++)n[w+E]=n[j+E]+a(n[w+E-x],n[w+E-C],n[w+E-x-C])}return n}function a(n,i,r){const s=n+i-r,h=s-n,x=s-i,C=s-r;return h*h<=x*x&&h*h<=C*C?n:x*x<=C*C?i:r}function p(n,i,r){r.width=S.readUint(n,i),i+=4,r.height=S.readUint(n,i),i+=4,r.depth=n[i],i++,r.ctype=n[i],i++,r.compress=n[i],i++,r.filter=n[i],i++,r.interlace=n[i],i++}function v(n,i,r,s,h,x,C,w,j){const I=Math.min(i,h),E=Math.min(r,x);let k=0,g=0;for(let F=0;F<E;F++)for(let u=0;u<I;u++)if(C>=0&&w>=0?(k=F*i+u<<2,g=(w+F)*h+C+u<<2):(k=(-w+F)*i-C+u<<2,g=F*h+u<<2),j==0)s[g]=n[k],s[g+1]=n[k+1],s[g+2]=n[k+2],s[g+3]=n[k+3];else if(j==1){var T=n[k+3]*.00392156862745098,c=n[k]*T,l=n[k+1]*T,b=n[k+2]*T,A=s[g+3]*(1/255),y=s[g]*A,U=s[g+1]*A,m=s[g+2]*A;const o=1-T,P=T+A*o,_=P==0?0:1/P;s[g+3]=255*P,s[g+0]=(c+y*o)*_,s[g+1]=(l+U*o)*_,s[g+2]=(b+m*o)*_}else if(j==2)T=n[k+3],c=n[k],l=n[k+1],b=n[k+2],A=s[g+3],y=s[g],U=s[g+1],m=s[g+2],T==A&&c==y&&l==U&&b==m?(s[g]=0,s[g+1]=0,s[g+2]=0,s[g+3]=0):(s[g]=c,s[g+1]=l,s[g+2]=b,s[g+3]=T);else if(j==3){if(T=n[k+3],c=n[k],l=n[k+1],b=n[k+2],A=s[g+3],y=s[g],U=s[g+1],m=s[g+2],T==A&&c==y&&l==U&&b==m)continue;if(T<220&&A>20)return!1}return!0}return{decode:function(i){const r=new Uint8Array(i);let s=8;const h=S,x=h.readUshort,C=h.readUint,w={tabs:{},frames:[]},j=new Uint8Array(r.length);let I,E=0,k=0;const g=[137,80,78,71,13,10,26,10];for(var T=0;T<8;T++)if(r[T]!=g[T])throw"The input is not a PNG file!";for(;s<r.length;){const F=h.readUint(r,s);s+=4;const u=h.readASCII(r,s,4);if(s+=4,u=="IHDR")p(r,s,w);else if(u=="iCCP"){for(var c=s;r[c]!=0;)c++;h.readASCII(r,s,c-s),r[c+1];const o=r.slice(c+2,s+F);let P=null;try{P=d(o)}catch{P=e(o)}w.tabs[u]=P}else if(u=="CgBI")w.tabs[u]=r.slice(s,s+4);else if(u=="IDAT"){for(T=0;T<F;T++)j[E+T]=r[s+T];E+=F}else if(u=="acTL")w.tabs[u]={num_frames:C(r,s),num_plays:C(r,s+4)},I=new Uint8Array(r.length);else if(u=="fcTL"){k!=0&&((m=w.frames[w.frames.length-1]).data=O(w,I.slice(0,k),m.rect.width,m.rect.height),k=0);const o={x:C(r,s+12),y:C(r,s+16),width:C(r,s+4),height:C(r,s+8)};let P=x(r,s+22);P=x(r,s+20)/(P==0?100:P);const _={rect:o,delay:Math.round(1e3*P),dispose:r[s+24],blend:r[s+25]};w.frames.push(_)}else if(u=="fdAT"){for(T=0;T<F-4;T++)I[k+T]=r[s+T+4];k+=F-4}else if(u=="pHYs")w.tabs[u]=[h.readUint(r,s),h.readUint(r,s+4),r[s+8]];else if(u=="cHRM")for(w.tabs[u]=[],T=0;T<8;T++)w.tabs[u].push(h.readUint(r,s+4*T));else if(u=="tEXt"||u=="zTXt"){w.tabs[u]==null&&(w.tabs[u]={});var l=h.nextZero(r,s),b=h.readASCII(r,s,l-s),A=s+F-l-1;if(u=="tEXt")U=h.readASCII(r,l+1,A);else{var y=d(r.slice(l+2,l+2+A));U=h.readUTF8(y,0,y.length)}w.tabs[u][b]=U}else if(u=="iTXt"){w.tabs[u]==null&&(w.tabs[u]={}),l=0,c=s,l=h.nextZero(r,c),b=h.readASCII(r,c,l-c);const o=r[c=l+1];var U;r[c+1],c+=2,l=h.nextZero(r,c),h.readASCII(r,c,l-c),c=l+1,l=h.nextZero(r,c),h.readUTF8(r,c,l-c),A=F-((c=l+1)-s),o==0?U=h.readUTF8(r,c,A):(y=d(r.slice(c,c+A)),U=h.readUTF8(y,0,y.length)),w.tabs[u][b]=U}else if(u=="PLTE")w.tabs[u]=h.readBytes(r,s,F);else if(u=="hIST"){const o=w.tabs.PLTE.length/3;for(w.tabs[u]=[],T=0;T<o;T++)w.tabs[u].push(x(r,s+2*T))}else if(u=="tRNS")w.ctype==3?w.tabs[u]=h.readBytes(r,s,F):w.ctype==0?w.tabs[u]=x(r,s):w.ctype==2&&(w.tabs[u]=[x(r,s),x(r,s+2),x(r,s+4)]);else if(u=="gAMA")w.tabs[u]=h.readUint(r,s)/1e5;else if(u=="sRGB")w.tabs[u]=r[s];else if(u=="bKGD")w.ctype==0||w.ctype==4?w.tabs[u]=[x(r,s)]:w.ctype==2||w.ctype==6?w.tabs[u]=[x(r,s),x(r,s+2),x(r,s+4)]:w.ctype==3&&(w.tabs[u]=r[s]);else if(u=="IEND")break;s+=F,h.readUint(r,s),s+=4}var m;return k!=0&&((m=w.frames[w.frames.length-1]).data=O(w,I.slice(0,k),m.rect.width,m.rect.height)),w.data=O(w,j,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(i){const r=i.width,s=i.height;if(i.tabs.acTL==null)return[M(i.data,r,s,i).buffer];const h=[];i.frames[0].data==null&&(i.frames[0].data=i.data);const x=r*s*4,C=new Uint8Array(x),w=new Uint8Array(x),j=new Uint8Array(x);for(let E=0;E<i.frames.length;E++){const k=i.frames[E],g=k.rect.x,T=k.rect.y,c=k.rect.width,l=k.rect.height,b=M(k.data,c,l,i);if(E!=0)for(var I=0;I<x;I++)j[I]=C[I];if(k.blend==0?v(b,c,l,C,r,s,g,T,0):k.blend==1&&v(b,c,l,C,r,s,g,T,1),h.push(C.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)v(w,c,l,C,r,s,g,T,0);else if(k.dispose==2)for(I=0;I<x;I++)C[I]=j[I]}}return h},_paeth:a,_copyTile:v,_bin:S}})();(function(){const{_copyTile:S}=ge,{_bin:M}=ge,O=ge._paeth;var d={table:(function(){const c=new Uint32Array(256);for(let l=0;l<256;l++){let b=l;for(let A=0;A<8;A++)1&b?b=3988292384^b>>>1:b>>>=1;c[l]=b}return c})(),update(c,l,b,A){for(let y=0;y<A;y++)c=d.table[255&(c^l[b+y])]^c>>>8;return c},crc:(c,l,b)=>4294967295^d.update(4294967295,c,l,b)};function e(c,l,b,A){l[b]+=c[0]*A>>4,l[b+1]+=c[1]*A>>4,l[b+2]+=c[2]*A>>4,l[b+3]+=c[3]*A>>4}function t(c){return Math.max(0,Math.min(255,c))}function f(c,l){const b=c[0]-l[0],A=c[1]-l[1],y=c[2]-l[2],U=c[3]-l[3];return b*b+A*A+y*y+U*U}function a(c,l,b,A,y,U,m){m==null&&(m=1);const F=A.length,u=[];for(var o=0;o<F;o++){const R=A[o];u.push([R>>>0&255,R>>>8&255,R>>>16&255,R>>>24&255])}for(o=0;o<F;o++){let R=4294967295;for(var P=0,_=0;_<F;_++){var D=f(u[o],u[_]);_!=o&&D<R&&(R=D,P=_)}}const N=new Uint32Array(y.buffer),L=new Int16Array(l*b*4),z=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(o=0;o<z.length;o++)z[o]=255*((z[o]+.5)/16-.5);for(let R=0;R<b;R++)for(let B=0;B<l;B++){var H;o=4*(R*l+B),m!=2?H=[t(c[o]+L[o]),t(c[o+1]+L[o+1]),t(c[o+2]+L[o+2]),t(c[o+3]+L[o+3])]:(D=z[4*(3&R)+(3&B)],H=[t(c[o]+D),t(c[o+1]+D),t(c[o+2]+D),t(c[o+3]+D)]),P=0;let Z=16777215;for(_=0;_<F;_++){const q=f(H,u[_]);q<Z&&(Z=q,P=_)}const $=u[P],Q=[H[0]-$[0],H[1]-$[1],H[2]-$[2],H[3]-$[3]];m==1&&(B!=l-1&&e(Q,L,o+4,7),R!=b-1&&(B!=0&&e(Q,L,o+4*l-4,3),e(Q,L,o+4*l,5),B!=l-1&&e(Q,L,o+4*l+4,1))),U[o>>2]=P,N[o>>2]=A[P]}}function p(c,l,b,A,y){y==null&&(y={});const{crc:U}=d,m=M.writeUint,F=M.writeUshort,u=M.writeASCII;let o=8;const P=c.frames.length>1;let _,D=!1,N=33+(P?20:0);if(y.sRGB!=null&&(N+=13),y.pHYs!=null&&(N+=21),y.iCCP!=null&&(_=pako.deflate(y.iCCP),N+=21+_.length+4),c.ctype==3){for(var L=c.plte.length,z=0;z<L;z++)c.plte[z]>>>24!=255&&(D=!0);N+=8+3*L+4+(D?8+1*L+4:0)}for(var H=0;H<c.frames.length;H++)P&&(N+=38),N+=($=c.frames[H]).cimg.length+12,H!=0&&(N+=4);N+=12;const R=new Uint8Array(N),B=[137,80,78,71,13,10,26,10];for(z=0;z<8;z++)R[z]=B[z];if(m(R,o,13),o+=4,u(R,o,"IHDR"),o+=4,m(R,o,l),o+=4,m(R,o,b),o+=4,R[o]=c.depth,o++,R[o]=c.ctype,o++,R[o]=0,o++,R[o]=0,o++,R[o]=0,o++,m(R,o,U(R,o-17,17)),o+=4,y.sRGB!=null&&(m(R,o,1),o+=4,u(R,o,"sRGB"),o+=4,R[o]=y.sRGB,o++,m(R,o,U(R,o-5,5)),o+=4),y.iCCP!=null){const Q=13+_.length;m(R,o,Q),o+=4,u(R,o,"iCCP"),o+=4,u(R,o,"ICC profile"),o+=11,o+=2,R.set(_,o),o+=_.length,m(R,o,U(R,o-(Q+4),Q+4)),o+=4}if(y.pHYs!=null&&(m(R,o,9),o+=4,u(R,o,"pHYs"),o+=4,m(R,o,y.pHYs[0]),o+=4,m(R,o,y.pHYs[1]),o+=4,R[o]=y.pHYs[2],o++,m(R,o,U(R,o-13,13)),o+=4),P&&(m(R,o,8),o+=4,u(R,o,"acTL"),o+=4,m(R,o,c.frames.length),o+=4,m(R,o,y.loop!=null?y.loop:0),o+=4,m(R,o,U(R,o-12,12)),o+=4),c.ctype==3){for(m(R,o,3*(L=c.plte.length)),o+=4,u(R,o,"PLTE"),o+=4,z=0;z<L;z++){const Q=3*z,q=c.plte[z],Y=255&q,te=q>>>8&255,Ue=q>>>16&255;R[o+Q+0]=Y,R[o+Q+1]=te,R[o+Q+2]=Ue}if(o+=3*L,m(R,o,U(R,o-3*L-4,3*L+4)),o+=4,D){for(m(R,o,L),o+=4,u(R,o,"tRNS"),o+=4,z=0;z<L;z++)R[o+z]=c.plte[z]>>>24&255;o+=L,m(R,o,U(R,o-L-4,L+4)),o+=4}}let Z=0;for(H=0;H<c.frames.length;H++){var $=c.frames[H];P&&(m(R,o,26),o+=4,u(R,o,"fcTL"),o+=4,m(R,o,Z++),o+=4,m(R,o,$.rect.width),o+=4,m(R,o,$.rect.height),o+=4,m(R,o,$.rect.x),o+=4,m(R,o,$.rect.y),o+=4,F(R,o,A[H]),o+=2,F(R,o,1e3),o+=2,R[o]=$.dispose,o++,R[o]=$.blend,o++,m(R,o,U(R,o-30,30)),o+=4);const Q=$.cimg;m(R,o,(L=Q.length)+(H==0?0:4)),o+=4;const q=o;u(R,o,H==0?"IDAT":"fdAT"),o+=4,H!=0&&(m(R,o,Z++),o+=4),R.set(Q,o),o+=L,m(R,o,U(R,q,o-q)),o+=4}return m(R,o,0),o+=4,u(R,o,"IEND"),o+=4,m(R,o,U(R,o-4,4)),o+=4,R.buffer}function v(c,l,b){for(let A=0;A<c.frames.length;A++){const y=c.frames[A];y.rect.width;const U=y.rect.height,m=new Uint8Array(U*y.bpl+U);y.cimg=s(y.img,U,y.bpp,y.bpl,m,l,b)}}function n(c,l,b,A,y){const U=y[0],m=y[1],F=y[2],u=y[3],o=y[4],P=y[5];let _=6,D=8,N=255;for(var L=0;L<c.length;L++){const ne=new Uint8Array(c[L]);for(var z=ne.length,H=0;H<z;H+=4)N&=ne[H+3]}const R=N!=255,B=(function(V,G,re,ae,J,le){const ee=[];for(var K=0;K<V.length;K++){const se=new Uint8Array(V[K]),he=new Uint32Array(se.buffer);var ce;let ue=0,be=0,me=G,Ee=re,ze=ae?1:0;if(K!=0){const st=le||ae||K==1||ee[K-2].dispose!=0?1:2;let Ne=0,$e=1e9;for(let Me=0;Me<st;Me++){var we=new Uint8Array(V[K-1-Me]);const ft=new Uint32Array(V[K-1-Me]);let ye=G,Ae=re,Ie=-1,Te=-1;for(let Fe=0;Fe<re;Fe++)for(let Se=0;Se<G;Se++)he[ie=Fe*G+Se]!=ft[ie]&&(Se<ye&&(ye=Se),Se>Ie&&(Ie=Se),Fe<Ae&&(Ae=Fe),Fe>Te&&(Te=Fe));Ie==-1&&(ye=Ae=Ie=Te=0),J&&((1&ye)==1&&ye--,(1&Ae)==1&&Ae--);const qe=(Ie-ye+1)*(Te-Ae+1);qe<$e&&($e=qe,Ne=Me,ue=ye,be=Ae,me=Ie-ye+1,Ee=Te-Ae+1)}we=new Uint8Array(V[K-1-Ne]),Ne==1&&(ee[K-1].dispose=2),ce=new Uint8Array(me*Ee*4),S(we,G,re,ce,me,Ee,-ue,-be,0),ze=S(se,G,re,ce,me,Ee,-ue,-be,3)?1:0,ze==1?r(se,G,re,ce,{x:ue,y:be,width:me,height:Ee}):S(se,G,re,ce,me,Ee,-ue,-be,0)}else ce=se.slice(0);ee.push({rect:{x:ue,y:be,width:me,height:Ee},img:ce,blend:ze,dispose:0})}if(ae)for(K=0;K<ee.length;K++){if((_e=ee[K]).blend==1)continue;const se=_e.rect,he=ee[K-1].rect,ue=Math.min(se.x,he.x),be=Math.min(se.y,he.y),me={x:ue,y:be,width:Math.max(se.x+se.width,he.x+he.width)-ue,height:Math.max(se.y+se.height,he.y+he.height)-be};ee[K-1].dispose=1,K-1!=0&&i(V,G,re,ee,K-1,me,J),i(V,G,re,ee,K,me,J)}let je=0;if(V.length!=1)for(var ie=0;ie<ee.length;ie++){var _e;je+=(_e=ee[ie]).rect.width*_e.rect.height}return ee})(c,l,b,U,m,F),Z={},$=[],Q=[];if(A!=0){const ne=[];for(H=0;H<B.length;H++)ne.push(B[H].img.buffer);const V=(function(J){let le=0;for(var ee=0;ee<J.length;ee++)le+=J[ee].byteLength;const K=new Uint8Array(le);let ce=0;for(ee=0;ee<J.length;ee++){const we=new Uint8Array(J[ee]),je=we.length;for(let ie=0;ie<je;ie+=4){let _e=we[ie],se=we[ie+1],he=we[ie+2];const ue=we[ie+3];ue==0&&(_e=se=he=0),K[ce+ie]=_e,K[ce+ie+1]=se,K[ce+ie+2]=he,K[ce+ie+3]=ue}ce+=je}return K.buffer})(ne),G=x(V,A);for(H=0;H<G.plte.length;H++)$.push(G.plte[H].est.rgba);let re=0;for(H=0;H<B.length;H++){const ae=(Y=B[H]).img.length;var q=new Uint8Array(G.inds.buffer,re>>2,ae>>2);Q.push(q);const J=new Uint8Array(G.abuf,re,ae);P&&a(Y.img,Y.rect.width,Y.rect.height,$,J,q),Y.img.set(J),re+=ae}}else for(L=0;L<B.length;L++){var Y=B[L];const ne=new Uint32Array(Y.img.buffer);var te=Y.rect.width;for(z=ne.length,q=new Uint8Array(z),Q.push(q),H=0;H<z;H++){const V=ne[H];if(H!=0&&V==ne[H-1])q[H]=q[H-1];else if(H>te&&V==ne[H-te])q[H]=q[H-te];else{let G=Z[V];if(G==null&&(Z[V]=G=$.length,$.push(V),$.length>=300))break;q[H]=G}}}const Ue=$.length;for(Ue<=256&&o==0&&(D=Ue<=2?1:Ue<=4?2:Ue<=16?4:8,D=Math.max(D,u)),L=0;L<B.length;L++){(Y=B[L]).rect.x,Y.rect.y,te=Y.rect.width;const ne=Y.rect.height;let V=Y.img;new Uint32Array(V.buffer);let G=4*te,re=4;if(Ue<=256&&o==0){G=Math.ceil(D*te/8);var pe=new Uint8Array(G*ne);const ae=Q[L];for(let J=0;J<ne;J++){H=J*G;const le=J*te;if(D==8)for(var X=0;X<te;X++)pe[H+X]=ae[le+X];else if(D==4)for(X=0;X<te;X++)pe[H+(X>>1)]|=ae[le+X]<<4-4*(1&X);else if(D==2)for(X=0;X<te;X++)pe[H+(X>>2)]|=ae[le+X]<<6-2*(3&X);else if(D==1)for(X=0;X<te;X++)pe[H+(X>>3)]|=ae[le+X]<<7-1*(7&X)}V=pe,_=3,re=1}else if(R==0&&B.length==1){pe=new Uint8Array(te*ne*3);const ae=te*ne;for(H=0;H<ae;H++){const J=3*H,le=4*H;pe[J]=V[le],pe[J+1]=V[le+1],pe[J+2]=V[le+2]}V=pe,_=2,re=3,G=3*te}Y.img=V,Y.bpl=G,Y.bpp=re}return{ctype:_,depth:D,plte:$,frames:B}}function i(c,l,b,A,y,U,m){const F=Uint8Array,u=Uint32Array,o=new F(c[y-1]),P=new u(c[y-1]),_=y+1<c.length?new F(c[y+1]):null,D=new F(c[y]),N=new u(D.buffer);let L=l,z=b,H=-1,R=-1;for(let Z=0;Z<U.height;Z++)for(let $=0;$<U.width;$++){const Q=U.x+$,q=U.y+Z,Y=q*l+Q,te=N[Y];te==0||A[y-1].dispose==0&&P[Y]==te&&(_==null||_[4*Y+3]!=0)||(Q<L&&(L=Q),Q>H&&(H=Q),q<z&&(z=q),q>R&&(R=q))}H==-1&&(L=z=H=R=0),m&&((1&L)==1&&L--,(1&z)==1&&z--),U={x:L,y:z,width:H-L+1,height:R-z+1};const B=A[y];B.rect=U,B.blend=1,B.img=new Uint8Array(U.width*U.height*4),A[y-1].dispose==0?(S(o,l,b,B.img,U.width,U.height,-U.x,-U.y,0),r(D,l,b,B.img,U)):S(D,l,b,B.img,U.width,U.height,-U.x,-U.y,0)}function r(c,l,b,A,y){S(c,l,b,A,y.width,y.height,-y.x,-y.y,2)}function s(c,l,b,A,y,U,m){const F=[];let u,o=[0,1,2,3,4];U!=-1?o=[U]:(l*A>5e5||b==1)&&(o=[0]),m&&(u={level:0});const P=ht;for(var _=0;_<o.length;_++){for(let L=0;L<l;L++)h(y,c,L,A,b,o[_]);F.push(P.deflate(y,u))}let D,N=1e9;for(_=0;_<F.length;_++)F[_].length<N&&(D=_,N=F[_].length);return F[D]}function h(c,l,b,A,y,U){const m=b*A;let F=m+b;if(c[F]=U,F++,U==0)if(A<500)for(var u=0;u<A;u++)c[F+u]=l[m+u];else c.set(new Uint8Array(l.buffer,m,A),F);else if(U==1){for(u=0;u<y;u++)c[F+u]=l[m+u];for(u=y;u<A;u++)c[F+u]=l[m+u]-l[m+u-y]+256&255}else if(b==0){for(u=0;u<y;u++)c[F+u]=l[m+u];if(U==2)for(u=y;u<A;u++)c[F+u]=l[m+u];if(U==3)for(u=y;u<A;u++)c[F+u]=l[m+u]-(l[m+u-y]>>1)+256&255;if(U==4)for(u=y;u<A;u++)c[F+u]=l[m+u]-O(l[m+u-y],0,0)+256&255}else{if(U==2)for(u=0;u<A;u++)c[F+u]=l[m+u]+256-l[m+u-A]&255;if(U==3){for(u=0;u<y;u++)c[F+u]=l[m+u]+256-(l[m+u-A]>>1)&255;for(u=y;u<A;u++)c[F+u]=l[m+u]+256-(l[m+u-A]+l[m+u-y]>>1)&255}if(U==4){for(u=0;u<y;u++)c[F+u]=l[m+u]+256-O(0,l[m+u-A],0)&255;for(u=y;u<A;u++)c[F+u]=l[m+u]+256-O(l[m+u-y],l[m+u-A],l[m+u-y-A])&255}}}function x(c,l){const b=new Uint8Array(c),A=b.slice(0),y=new Uint32Array(A.buffer),U=C(A,l),m=U[0],F=U[1],u=b.length,o=new Uint8Array(u>>2);let P;if(b.length<2e7)for(var _=0;_<u;_+=4)P=w(m,D=b[_]*(1/255),N=b[_+1]*(1/255),L=b[_+2]*(1/255),z=b[_+3]*(1/255)),o[_>>2]=P.ind,y[_>>2]=P.est.rgba;else for(_=0;_<u;_+=4){var D=b[_]*.00392156862745098,N=b[_+1]*(1/255),L=b[_+2]*(1/255),z=b[_+3]*(1/255);for(P=m;P.left;)P=j(P.est,D,N,L,z)<=0?P.left:P.right;o[_>>2]=P.ind,y[_>>2]=P.est.rgba}return{abuf:A.buffer,inds:o,plte:F}}function C(c,l,b){b==null&&(b=1e-4);const A=new Uint32Array(c.buffer),y={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};y.bst=k(c,y.i0,y.i1),y.est=g(y.bst);const U=[y];for(;U.length<l;){let F=0,u=0;for(var m=0;m<U.length;m++)U[m].est.L>F&&(F=U[m].est.L,u=m);if(F<b)break;const o=U[u],P=I(c,A,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=P||o.i1<=P){o.est.L=0;continue}const _={i0:o.i0,i1:P,bst:null,est:null,tdst:0,left:null,right:null};_.bst=k(c,_.i0,_.i1),_.est=g(_.bst);const D={i0:P,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(D.bst={R:[],m:[],N:o.bst.N-_.bst.N},m=0;m<16;m++)D.bst.R[m]=o.bst.R[m]-_.bst.R[m];for(m=0;m<4;m++)D.bst.m[m]=o.bst.m[m]-_.bst.m[m];D.est=g(D.bst),o.left=_,o.right=D,U[u]=_,U.push(D)}for(U.sort(((F,u)=>u.bst.N-F.bst.N)),m=0;m<U.length;m++)U[m].ind=m;return[y,U]}function w(c,l,b,A,y){if(c.left==null)return c.tdst=(function(_,D,N,L,z){const H=D-_[0],R=N-_[1],B=L-_[2],Z=z-_[3];return H*H+R*R+B*B+Z*Z})(c.est.q,l,b,A,y),c;const U=j(c.est,l,b,A,y);let m=c.left,F=c.right;U>0&&(m=c.right,F=c.left);const u=w(m,l,b,A,y);if(u.tdst<=U*U)return u;const o=w(F,l,b,A,y);return o.tdst<u.tdst?o:u}function j(c,l,b,A,y){const{e:U}=c;return U[0]*l+U[1]*b+U[2]*A+U[3]*y-c.eMq}function I(c,l,b,A,y,U){for(A-=4;b<A;){for(;E(c,b,y)<=U;)b+=4;for(;E(c,A,y)>U;)A-=4;if(b>=A)break;const m=l[b>>2];l[b>>2]=l[A>>2],l[A>>2]=m,b+=4,A-=4}for(;E(c,b,y)>U;)b-=4;return b+4}function E(c,l,b){return c[l]*b[0]+c[l+1]*b[1]+c[l+2]*b[2]+c[l+3]*b[3]}function k(c,l,b){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0],U=b-l>>2;for(let m=l;m<b;m+=4){const F=c[m]*.00392156862745098,u=c[m+1]*(1/255),o=c[m+2]*(1/255),P=c[m+3]*(1/255);y[0]+=F,y[1]+=u,y[2]+=o,y[3]+=P,A[0]+=F*F,A[1]+=F*u,A[2]+=F*o,A[3]+=F*P,A[5]+=u*u,A[6]+=u*o,A[7]+=u*P,A[10]+=o*o,A[11]+=o*P,A[15]+=P*P}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:y,N:U}}function g(c){const{R:l}=c,{m:b}=c,{N:A}=c,y=b[0],U=b[1],m=b[2],F=b[3],u=A==0?0:1/A,o=[l[0]-y*y*u,l[1]-y*U*u,l[2]-y*m*u,l[3]-y*F*u,l[4]-U*y*u,l[5]-U*U*u,l[6]-U*m*u,l[7]-U*F*u,l[8]-m*y*u,l[9]-m*U*u,l[10]-m*m*u,l[11]-m*F*u,l[12]-F*y*u,l[13]-F*U*u,l[14]-F*m*u,l[15]-F*F*u],P=o,_=T;let D=[Math.random(),Math.random(),Math.random(),Math.random()],N=0,L=0;if(A!=0)for(let H=0;H<16&&(D=_.multVec(P,D),L=Math.sqrt(_.dot(D,D)),D=_.sml(1/L,D),!(H!=0&&Math.abs(L-N)<1e-9));H++)N=L;const z=[y*u,U*u,m*u,F*u];return{Cov:o,q:z,e:D,L:N,eMq255:_.dot(_.sml(255,z),D),eMq:_.dot(D,z),rgba:(Math.round(255*z[3])<<24|Math.round(255*z[2])<<16|Math.round(255*z[1])<<8|Math.round(255*z[0])<<0)>>>0}}var T={multVec:(c,l)=>[c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3],c[4]*l[0]+c[5]*l[1]+c[6]*l[2]+c[7]*l[3],c[8]*l[0]+c[9]*l[1]+c[10]*l[2]+c[11]*l[3],c[12]*l[0]+c[13]*l[1]+c[14]*l[2]+c[15]*l[3]],dot:(c,l)=>c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3],sml:(c,l)=>[c*l[0],c*l[1],c*l[2],c*l[3]]};ge.encode=function(l,b,A,y,U,m,F){y==null&&(y=0),F==null&&(F=!1);const u=n(l,b,A,y,[!1,!1,!1,0,F,!1]);return v(u,-1),p(u,b,A,U,m)},ge.encodeLL=function(l,b,A,y,U,m,F,u){const o={ctype:0+(y==1?0:2)+(U==0?0:4),depth:m,frames:[]},P=(y+U)*m,_=P*b;for(let D=0;D<l.length;D++)o.frames.push({rect:{x:0,y:0,width:b,height:A},img:new Uint8Array(l[D]),blend:0,dispose:1,bpp:Math.ceil(P/8),bpl:Math.ceil(_/8)});return v(o,0,!0),p(o,b,A,F,u)},ge.encode.compress=n,ge.encode.dither=a,ge.quantize=x,ge.quantize.getKDtree=C,ge.quantize.getNearest=w})();const Xe={toArrayBuffer(S,M){const O=S.width,d=S.height,e=O<<2,t=S.getContext("2d").getImageData(0,0,O,d),f=new Uint32Array(t.data.buffer),a=(32*O+31)/32<<2,p=a*d,v=122+p,n=new ArrayBuffer(v),i=new DataView(n),r=1<<20;let s,h,x,C,w=r,j=0,I=0,E=0;function k(c){i.setUint16(I,c,!0),I+=2}function g(c){i.setUint32(I,c,!0),I+=4}function T(c){I+=c}k(19778),g(v),T(4),g(122),g(108),g(O),g(-d>>>0),k(1),k(32),g(3),g(p),g(2835),g(2835),T(8),g(16711680),g(65280),g(255),g(4278190080),g(1466527264),(function c(){for(;j<d&&w>0;){for(C=122+j*a,s=0;s<e;)w--,h=f[E++],x=h>>>24,i.setUint32(C+s,h<<8|x),s+=4;j++}E<f.length?(w=r,setTimeout(c,Xe._dly)):M(n)})()},toBlob(S,M){this.toArrayBuffer(S,(O=>{M(new Blob([O],{type:"image/bmp"}))}))},_dly:9};var fe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},gt={[fe.CHROME]:16384,[fe.FIREFOX]:11180,[fe.DESKTOP_SAFARI]:16384,[fe.IE]:8192,[fe.IOS]:4096,[fe.ETC]:8192};const We=typeof window<"u",Ye=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,De=We&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),pt=(We||Ye)&&(De&&De.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Je=(We||Ye)&&(De&&De.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Qe(S,M,O=Date.now()){return new Promise((d=>{const e=S.split(","),t=e[0].match(/:(.*?);/)[1],f=globalThis.atob(e[1]);let a=f.length;const p=new Uint8Array(a);for(;a--;)p[a]=f.charCodeAt(a);const v=new Blob([p],{type:t});v.name=M,v.lastModified=O,d(v)}))}function et(S){return new Promise(((M,O)=>{const d=new Je;d.onload=()=>M(d.result),d.onerror=e=>O(e),d.readAsDataURL(S)}))}function tt(S){return new Promise(((M,O)=>{const d=new Image;d.onload=()=>M(d),d.onerror=e=>O(e),d.src=S}))}function Ce(){if(Ce.cachedResult!==void 0)return Ce.cachedResult;let S=fe.ETC;const{userAgent:M}=navigator;return/Chrom(e|ium)/i.test(M)?S=fe.CHROME:/iP(ad|od|hone)/i.test(M)&&/WebKit/i.test(M)?S=fe.IOS:/Safari/i.test(M)?S=fe.DESKTOP_SAFARI:/Firefox/i.test(M)?S=fe.FIREFOX:(/MSIE/i.test(M)||document.documentMode)&&(S=fe.IE),Ce.cachedResult=S,Ce.cachedResult}function rt(S,M){const O=Ce(),d=gt[O];let e=S,t=M,f=e*t;const a=e>t?t/e:e/t;for(;f>d*d;){const p=(d+e)/2,v=(d+t)/2;p<v?(t=v,e=v*a):(t=p*a,e=p),f=e*t}return{width:e,height:t}}function Le(S,M){let O,d;try{if(O=new OffscreenCanvas(S,M),d=O.getContext("2d"),d===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{O=document.createElement("canvas"),d=O.getContext("2d")}return O.width=S,O.height=M,[O,d]}function nt(S,M){const{width:O,height:d}=rt(S.width,S.height),[e,t]=Le(O,d);return M&&/jpe?g/.test(M)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(S,0,0,e.width,e.height),e}function ke(){return ke.cachedResult!==void 0||(ke.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),ke.cachedResult}function Oe(S,M={}){return new Promise((function(O,d){let e,t;var f=function(){try{return t=nt(e,M.fileType||S.type),O([e,t])}catch(p){return d(p)}},a=function(p){try{var v=function(n){try{throw n}catch(i){return d(i)}};try{let n;return et(S).then((function(i){try{return n=i,tt(n).then((function(r){try{return e=r,(function(){try{return f()}catch(s){return d(s)}})()}catch(s){return v(s)}}),v)}catch(r){return v(r)}}),v)}catch(n){v(n)}}catch(n){return d(n)}};try{if(ke()||[fe.DESKTOP_SAFARI,fe.MOBILE_SAFARI].includes(Ce()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(S).then((function(p){try{return e=p,f()}catch{return a()}}),a)}catch{a()}}))}function He(S,M,O,d,e=1){return new Promise((function(t,f){let a;if(M==="image/png"){let v,n,i;return v=S.getContext("2d"),{data:n}=v.getImageData(0,0,S.width,S.height),i=ge.encode([n.buffer],S.width,S.height,4096*e),a=new Blob([i],{type:M}),a.name=O,a.lastModified=d,p.call(this)}{let v=function(){return p.call(this)};if(M==="image/bmp")return new Promise((n=>Xe.toBlob(S,n))).then(function(n){try{return a=n,a.name=O,a.lastModified=d,v.call(this)}catch(i){return f(i)}}.bind(this),f);{let n=function(){return v.call(this)};if(typeof OffscreenCanvas=="function"&&S instanceof OffscreenCanvas)return S.convertToBlob({type:M,quality:e}).then(function(i){try{return a=i,a.name=O,a.lastModified=d,n.call(this)}catch(r){return f(r)}}.bind(this),f);{let i;return i=S.toDataURL(M,e),Qe(i,O,d).then(function(r){try{return a=r,n.call(this)}catch(s){return f(s)}}.bind(this),f)}}}function p(){return t(a)}}))}function ve(S){S.width=0,S.height=0}function Re(){return new Promise((function(S,M){let O,d,e,t;return Re.cachedResult!==void 0?S(Re.cachedResult):Qe("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(f){try{return O=f,Oe(O).then((function(a){try{return d=a[1],He(d,O.type,O.name,O.lastModified).then((function(p){try{return e=p,ve(d),Oe(e).then((function(v){try{return t=v[0],Re.cachedResult=t.width===1&&t.height===2,S(Re.cachedResult)}catch(n){return M(n)}}),M)}catch(v){return M(v)}}),M)}catch(p){return M(p)}}),M)}catch(a){return M(a)}}),M)}))}function it(S){return new Promise(((M,O)=>{const d=new Je;d.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return M(-2);const f=t.byteLength;let a=2;for(;a<f;){if(t.getUint16(a+2,!1)<=8)return M(-1);const p=t.getUint16(a,!1);if(a+=2,p==65505){if(t.getUint32(a+=2,!1)!=1165519206)return M(-1);const v=t.getUint16(a+=6,!1)==18761;a+=t.getUint32(a+4,v);const n=t.getUint16(a,v);a+=2;for(let i=0;i<n;i++)if(t.getUint16(a+12*i,v)==274)return M(t.getUint16(a+12*i+8,v))}else{if((65280&p)!=65280)break;a+=t.getUint16(a,!1)}}return M(-1)},d.onerror=e=>O(e),d.readAsArrayBuffer(S)}))}function ot(S,M){const{width:O}=S,{height:d}=S,{maxWidthOrHeight:e}=M;let t,f=S;return isFinite(e)&&(O>e||d>e)&&([f,t]=Le(O,d),O>d?(f.width=e,f.height=d/O*e):(f.width=O/d*e,f.height=e),t.drawImage(S,0,0,f.width,f.height),ve(S)),f}function at(S,M){const{width:O}=S,{height:d}=S,[e,t]=Le(O,d);switch(M>4&&M<9?(e.width=d,e.height=O):(e.width=O,e.height=d),M){case 2:t.transform(-1,0,0,1,O,0);break;case 3:t.transform(-1,0,0,-1,O,d);break;case 4:t.transform(1,0,0,-1,0,d);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,d,0);break;case 7:t.transform(0,-1,-1,0,d,O);break;case 8:t.transform(0,-1,1,0,0,O)}return t.drawImage(S,0,0,O,d),ve(S),e}function Ze(S,M,O=0){return new Promise((function(d,e){let t,f,a,p,v,n,i,r,s,h,x,C,w,j,I,E,k,g,T,c;function l(A=5){if(M.signal&&M.signal.aborted)throw M.signal.reason;t+=A,M.onProgress(Math.min(t,100))}function b(A){if(M.signal&&M.signal.aborted)throw M.signal.reason;t=Math.min(Math.max(A,t),100),M.onProgress(t)}return t=O,f=M.maxIteration||10,a=1024*M.maxSizeMB*1024,l(),Oe(S,M).then(function(A){try{return[,p]=A,l(),v=ot(p,M),l(),new Promise((function(y,U){var m;if(!(m=M.exifOrientation))return it(S).then(function(u){try{return m=u,F.call(this)}catch(o){return U(o)}}.bind(this),U);function F(){return y(m)}return F.call(this)})).then(function(y){try{return n=y,l(),Re().then(function(U){try{return i=U?v:at(v,n),l(),r=M.initialQuality||1,s=M.fileType||S.type,He(i,s,S.name,S.lastModified,r).then(function(m){try{{let u=function(){if(f--&&(I>a||I>w)){let P,_;return P=c?.95*T.width:T.width,_=c?.95*T.height:T.height,[k,g]=Le(P,_),g.drawImage(T,0,0,P,_),r*=s==="image/png"?.85:.95,He(k,s,S.name,S.lastModified,r).then((function(D){try{return E=D,ve(T),T=k,I=E.size,b(Math.min(99,Math.floor((j-I)/(j-a)*100))),u}catch(N){return e(N)}}),e)}return[1]},o=function(){return ve(T),ve(k),ve(v),ve(i),ve(p),b(100),d(E)};if(h=m,l(),x=h.size>a,C=h.size>S.size,!x&&!C)return b(100),d(h);var F;return w=S.size,j=h.size,I=j,T=i,c=!M.alwaysKeepResolution&&x,(F=function(P){for(;P;){if(P.then)return void P.then(F,e);try{if(P.pop){if(P.length)return P.pop()?o.call(this):P;P=u}else P=P.call(this)}catch(_){return e(_)}}}.bind(this))(u)}}catch(u){return e(u)}}.bind(this),e)}catch(m){return e(m)}}.bind(this),e)}catch(U){return e(U)}}.bind(this),e)}catch(y){return e(y)}}.bind(this),e)}))}const mt=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Be;function vt(S,M){return new Promise(((O,d)=>{Be||(Be=(function(f){const a=[];return a.push(f),URL.createObjectURL(new Blob(a))})(mt));const e=new Worker(Be);e.addEventListener("message",(function(f){if(M.signal&&M.signal.aborted)e.terminate();else if(f.data.progress===void 0){if(f.data.error)return d(new Error(f.data.error)),void e.terminate();O(f.data.file),e.terminate()}else M.onProgress(f.data.progress)})),e.addEventListener("error",d),M.signal&&M.signal.addEventListener("abort",(()=>{d(M.signal.reason),e.terminate()})),e.postMessage({file:S,imageCompressionLibUrl:M.libURL,options:{...M,onProgress:void 0,signal:void 0}})}))}function oe(S,M){return new Promise((function(O,d){let e,t,f,a,p,v;if(e={...M},f=0,{onProgress:a}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=s=>{f=s,typeof a=="function"&&a(f)},!(S instanceof Blob||S instanceof pt))return d(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(S.type))return d(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||v)return Ze(S,e).then(function(s){try{return t=s,r.call(this)}catch(h){return d(h)}}.bind(this),d);var n=function(){try{return r.call(this)}catch(s){return d(s)}}.bind(this),i=function(s){try{return Ze(S,e).then((function(h){try{return t=h,n()}catch(x){return d(x)}}),d)}catch(h){return d(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",vt(S,e).then((function(s){try{return t=s,n()}catch{return i()}}),i)}catch{i()}function r(){try{t.name=S.name,t.lastModified=S.lastModified}catch{}try{e.preserveExif&&S.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===S.type)&&(t=Ve(S,t))}catch{}return O(t)}}))}oe.getDataUrlFromFile=et,oe.getFilefromDataUrl=Qe,oe.loadImage=tt,oe.drawImageInCanvas=nt,oe.drawFileInCanvas=Oe,oe.canvasToFile=He,oe.getExifOrientation=it,oe.handleMaxWidthOrHeight=ot,oe.followExifOrientation=at,oe.cleanupCanvasMemory=ve,oe.isAutoOrientationInBrowser=Re,oe.approximateBelowMaximumCanvasSizeOfBrowser=rt,oe.copyExifWithoutOrientation=Ve,oe.getBrowserName=Ce,oe.version="2.0.2";function bt({userId:S,userAvatar:M}){const[O,d]=de.useState(""),[e,t]=de.useState(!1),[f,a]=de.useState(!1),[p,v]=de.useState(""),[n,i]=de.useState([]),[r,s]=de.useState([]),h=async j=>{const I=Array.from(j.target.files||[]);if(I.length===0)return;if(I.length+n.length>4){v("Maximum 4 images per post");return}i([...n,...I]);const E=I.map(k=>URL.createObjectURL(k));s([...r,...E])},x=j=>{const I=n.filter((k,g)=>g!==j),E=r.filter((k,g)=>g!==j);URL.revokeObjectURL(r[j]),i(I),s(E)},C=async j=>{try{const E=await oe(j,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),k=j.name.split(".").pop(),g=`${S}/${Date.now()}-${Math.random().toString(36).substring(7)}.${k}`,{data:T,error:c}=await xe.storage.from("media").upload(g,E);if(c)throw c;const{data:{publicUrl:l}}=xe.storage.from("media").getPublicUrl(T.path);return l}catch(I){throw console.error("Upload error:",I),new Error("Failed to upload image")}},w=async j=>{if(j.preventDefault(),!O.trim()&&n.length===0){v("Please write something or add an image");return}a(!0),v("");try{let I=[];n.length>0&&(t(!0),I=await Promise.all(n.map(C)),t(!1));const{error:E}=await xe.from("posts").insert({user_id:S,content:O.trim(),media_urls:I.length>0?I:null});if(E)throw E;d(""),i([]),r.forEach(k=>URL.revokeObjectURL(k)),s([]),window.location.reload()}catch(I){v(I.message||"Failed to create post"),t(!1),a(!1)}};return W.jsxs("form",{onSubmit:w,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[W.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"start"},children:[M?W.jsx("img",{src:M,alt:"You",style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):W.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#4A90E2",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold",flexShrink:0},children:"?"}),W.jsx("textarea",{value:O,onChange:j=>d(j.target.value),placeholder:"What's on your mind?",rows:3,style:{flex:1,resize:"vertical",minHeight:"80px",fontSize:"16px"},disabled:f})]}),p&&W.jsx("div",{style:{background:"#fee",color:"#c33",padding:"10px",borderRadius:"6px",fontSize:"14px"},children:p}),r.length>0&&W.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},children:r.map((j,I)=>W.jsxs("div",{style:{position:"relative"},children:[W.jsx("img",{src:j,alt:`Preview ${I+1}`,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"8px"}}),W.jsx("button",{type:"button",onClick:()=>x(I),style:{position:"absolute",top:"5px",right:"5px",background:"rgba(0,0,0,0.7)",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",fontSize:"16px",lineHeight:"1"},children:""})]},I))}),W.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[W.jsxs("label",{style:{cursor:"pointer"},children:[W.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:h,style:{display:"none"},disabled:f||n.length>=4}),W.jsxs("span",{style:{color:"#4A90E2",fontWeight:"500",fontSize:"14px"},children:[" Add Photos ",n.length>0&&`(${n.length}/4)`]})]}),W.jsx("button",{type:"submit",className:"btn",disabled:f||e,style:{opacity:f||e?.5:1},children:e?"Uploading...":f?"Posting...":"Post"})]})]})}function xt(){const[S,M]=de.useState(null),[O,d]=de.useState(null),[e,t]=de.useState([]),[f,a]=de.useState(!0),[p,v]=de.useState("");de.useEffect(()=>{n()},[]);async function n(){try{const r=await lt();if(M(r),!r){window.location.href="/login.html";return}if(!Ge){const{data:s}=await xe.from("profiles").select("*").eq("id",r.id).single();d(s);const{data:h,error:x}=await xe.from("posts").select(`
            *,
            profile:profiles(*)
          `).order("created_at",{ascending:!1}).limit(50);if(x)throw x;t(h||[])}a(!1)}catch(r){v(r.message),a(!1)}}const i=async()=>{await xe.auth.signOut(),window.location.href="/login.html"};return f?W.jsx("div",{style:{textAlign:"center",padding:"40px"},children:W.jsx("p",{children:"Loading..."})}):p?W.jsxs("div",{className:"error",children:[W.jsx("strong",{children:"Error:"})," ",p]}):W.jsxs(W.Fragment,{children:[W.jsxs("nav",{slot:"nav",style:{display:"flex",gap:"20px",alignItems:"center"},children:[W.jsx("a",{href:"/admin.html",children:"Admin"}),W.jsx("button",{onClick:i,className:"btn btn-secondary",children:"Sign Out"})]}),W.jsxs("div",{style:{marginBottom:"30px"},children:[W.jsx("h1",{style:{marginBottom:"20px"},children:"Family Feed"}),Ge,W.jsx("div",{className:"card",children:W.jsx(bt,{userId:S?.id||Ke,userAvatar:O?.avatar_url})})]}),W.jsxs("div",{children:[e.length===0&&W.jsx("div",{className:"card",style:{textAlign:"center",padding:"40px"},children:W.jsx("p",{style:{color:"#999"},children:"No posts yet. Be the first to share something!"})}),e.map(r=>W.jsx(wt,{post:r,currentUserId:S?.id||Ke},r.id))]})]})}function wt({post:S,currentUserId:M}){const O=t=>{const f=new Date(t),p=new Date().getTime()-f.getTime(),v=Math.floor(p/(1e3*60*60)),n=Math.floor(v/24);return n>0?`${n}d ago`:v>0?`${v}h ago`:"Just now"},d=async()=>{if(confirm("Delete this post?"))try{if(S.media_urls&&S.media_urls.length>0)for(const t of S.media_urls){const f=t.split("/media/")[1];f&&await xe.storage.from("media").remove([f])}await xe.from("posts").delete().eq("id",S.id),window.location.reload()}catch{alert("Failed to delete post")}},e=S.user_id===M;return W.jsxs("div",{className:"card",style:{marginBottom:"15px"},children:[W.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"15px",gap:"10px"},children:[W.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flex:1,minWidth:0},children:[S.profile?.avatar_url?W.jsx("img",{src:S.profile.avatar_url,alt:S.profile.display_name,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):W.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#4A90E2",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold",flexShrink:0},children:S.profile?.display_name?.[0]?.toUpperCase()||"?"}),W.jsxs("div",{style:{minWidth:0,flex:1},children:[W.jsx("div",{style:{fontWeight:600,color:"#333",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:S.profile?.display_name||"Unknown"}),W.jsx("div",{style:{fontSize:"13px",color:"#999"},children:O(S.created_at)})]})]}),e&&W.jsx("button",{onClick:d,style:{background:"none",border:"none",fontSize:"28px",color:"#999",cursor:"pointer",lineHeight:1,padding:0,width:"28px",height:"28px",flexShrink:0},title:"Delete post",children:""})]}),W.jsx("div",{style:{fontSize:"15px",lineHeight:1.6,whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word"},children:S.content}),S.media_urls&&S.media_urls.length>0&&W.jsx("div",{style:{marginTop:"15px",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},children:S.media_urls.map((t,f)=>W.jsx("img",{src:t,alt:"Post media",style:{width:"100%",borderRadius:"8px",objectFit:"cover",maxHeight:"300px",minHeight:"150px"}},f))})]})}export{xt as default};
